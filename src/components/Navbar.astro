---
import Container from "./Container.astro";

const menu = [
    {
        label: "Home",
        href: "/",
        external: false
    },
    {
        label: "Consulting",
        href: "/consulting",
        external: false
    },
    {
        label: "Majikode",
        href: "https://majikode.com",
        external: true
    }
];
---

<Container class="py-4">
    <nav>
        <div class="flex flex-wrap justify-between md:gap-10 md:flex-nowrap">
            <div class="flex items-center justify-between w-full md:w-auto">
                <a href="/" data-astro-prefetch>
                    <img src="/logo-dark.png" alt="Kamil Marut" width="48" />
                </a>
                <button
                    id="menuToggle"
                    aria-label="Toggle Menu"
                    class="px-2 py-1 ml-auto rounded-md md:hidden focus:text-blue-500 focus:outline-none text-gray-300"
                >
                    <svg
                        id="menuIcon"
                        class="w-6 h-6 fill-current"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                    >
                        <path
                            fill-rule="evenodd"
                            d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"
                        ></path>
                    </svg>
                </button>
            </div>
            <div
                id="menuItems"
                class="flex-col items-center justify-start order-1 hidden w-full md:flex md:flex-row md:justify-end md:w-auto md:flex-1 md:order-none"
            >
                {
                    menu.map((item, index) => (
                        <a
                            href={item.href}
                            class="px-5 py-2 text-sm font-medium text-gray-400 hover:text-primary"
                            target={item.external ? "_blank" : "_self"}
                            data-astro-prefetch={item.external ? "false" : "hover"}
                        >
                            {item.label}{" "}
                            {item.external && (
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width=".5rem"
                                    height=".5rem"
                                    viewBox="0 0 16 16"
                                    class="inline-flex"
                                >
                                    <g fill="currentColor" fill-rule="evenodd">
                                        <path d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5" />
                                        <path d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0z" />
                                    </g>
                                </svg>
                            )}
                        </a>
                    ))
                }
            </div>
        </div>
    </nav>
</Container>

<script>
    let menuOpen = false;

    function toggleMenu() {
        menuOpen = !menuOpen;
        const menuItems = document.getElementById("menuItems");
        menuItems!.style.display = menuOpen ? "flex" : "none";
        const icon = document.getElementById("menuIcon");
        icon!.innerHTML = menuOpen
            ? `<path fillRule="evenodd" clipRule="evenodd" d="M18.278 16.864a1 1 0 0 1-1.414 1.414l-4.829-4.828-4.828 4.828a1 1 0 0 1-1.414-1.414l4.828-4.829-4.828-4.828a1 1 0 0 1 1.414-1.414l4.829 4.828 4.828-4.828a1 1 0 1 1 1.414 1.414l-4.828 4.829 4.828 4.828z"/>`
            : `<path fillRule="evenodd" d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"/>`;
    }

    const menuToggle = document.getElementById("menuToggle");
    menuToggle!.addEventListener("click", toggleMenu);
</script>
